% -- Implements the frontmatter, title page, and abstract.

% For some reason, this does not work in the header
\renewcommand{\abstractname}{Abstract.}

% Add the short title to the fancy header
% Ensure graphicx package is loaded for image handling

% Add the short title and image to the fancy header
\fancypagestyle{plain}{
    $if(headerimage)$
    \fancyhead[L]{\includegraphics[height=20pt]{$headerimage$}}  % Image on the left
    $endif$
    $if(shorttitle)$
    \fancyhead[R]{$shorttitle$}  % Short title on the right
    $endif$
}

% Ensure this fancy header is used globally
\pagestyle{fancy}
\fancyhf{}  % Clear default header/footer
$if(headerimage)$
\fancyhead[L]{\includegraphics[height=20pt]{$headerimage$}}  % Image on the left
$endif$
$if(shorttitle)$
\fancyhead[R]{$shorttitle$}  % Short title on the right
$endif$

$if(has-frontmatter)$
\frontmatter
$endif$
$if(title)$
\maketitle
%\noindent \rule{\linewidth}{.5pt}
$endif$



$if(abstract)$
\begin{abstract}
$abstract$
\end{abstract}
$if(keywords)$
\begin{keywords}
\def\sep{;\ }
$for(keywords/allbutlast)$$keywords$\sep $endfor$
$for(keywords/last)$$keywords$$endfor$
\end{keywords}
$endif$
$endif$

$if(author)$
\author{$for(author)$$author.name$$if(author.email)$ \\ \texttt{$author.email$}\par\vspace*{2cm} $endif$$sep$ \and $endfor$}
$endif$




%\noindent \rule{\linewidth}{.5pt}
